<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | IGUMICH INT'L LIMITED</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .admin-sidebar {
            width: 250px;
            background: linear-gradient(180deg, #0056b3, #003366);
            color: white;
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        
        .admin-logo {
            padding: 0 20px 30px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        
        .admin-logo h2 {
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-logo span {
            font-size: 12px;
            opacity: 0.8;
            display: block;
            margin-top: 5px;
        }
        
        .admin-nav {
            padding: 0 20px;
        }
        
        .admin-nav ul {
            list-style: none;
        }
        
        .admin-nav li {
            margin-bottom: 5px;
        }
        
        .admin-nav a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s;
        }
        
        .admin-nav a:hover,
        .admin-nav a.active {
            background-color: rgba(255,255,255,0.1);
            color: white;
        }
        
        .admin-nav i {
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .admin-main {
            flex: 1;
            margin-left: 250px;
            padding: 0;
        }
        
        .admin-header {
            background-color: white;
            padding: 20px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .admin-header h1 {
            font-size: 24px;
            color: #0056b3;
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background-color: #f0f7ff;
            border-radius: 6px;
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #0056b3, #1a73e8);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #0056b3, #1a73e8);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #004494, #0d62d9);
        }
        
        .btn-secondary {
            background-color: #e63946;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #c1121f;
        }
        
        .btn-logout {
            background-color: #ff9800;
            color: white;
        }
        
        .btn-logout:hover {
            background-color: #e68900;
        }
        
        /* Content Area */
        .admin-content {
            padding: 30px;
        }
        
        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }
        
        .stat-icon.visitors {
            background: linear-gradient(135deg, #2a9d8f, #21867a);
        }
        
        .stat-icon.products {
            background: linear-gradient(135deg, #e63946, #c1121f);
        }
        
        .stat-icon.orders {
            background: linear-gradient(135deg, #ff9800, #e68900);
        }
        
        .stat-icon.whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
        }
        
        .stat-info h3 {
            font-size: 32px;
            color: #0056b3;
            margin-bottom: 5px;
        }
        
        .stat-info p {
            color: #666;
            font-size: 14px;
        }
        
        /* Admin Sections */
        .admin-section {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.05);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .section-header h2 {
            font-size: 20px;
            color: #0056b3;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #0056b3;
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .image-preview {
            width: 150px;
            height: 150px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #888;
            margin-top: 10px;
            overflow: hidden;
            background-color: #f9f9f9;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .file-upload {
            position: relative;
            margin-top: 10px;
        }
        
        .file-upload input {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .file-upload-label {
            display: inline-block;
            background-color: #f0f0f0;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            border: 1px solid #ddd;
            transition: background-color 0.3s;
        }
        
        .file-upload-label:hover {
            background-color: #e0e0e0;
        }
        
        /* Products List */
        .products-list {
            margin-top: 20px;
        }
        
        .product-item {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .product-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .product-img-small {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
        }
        
        .product-details h4 {
            color: #0056b3;
            margin-bottom: 5px;
        }
        
        .product-details p {
            color: #666;
            font-size: 14px;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 14px;
        }
        
        .btn-edit {
            background: linear-gradient(135deg, #4cc9f0, #3aa8d8);
            color: white;
        }
        
        .btn-delete {
            background: linear-gradient(135deg, #e63946, #c1121f);
            color: white;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 600px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            background: linear-gradient(135deg, #0056b3, #1a73e8);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            font-size: 20px;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        /* Alerts */
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab-btn:hover {
            color: #0056b3;
        }
        
        .tab-btn.active {
            color: #0056b3;
            border-bottom-color: #e63946;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Visitor Chart */
        .visitor-chart-container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.05);
        }
        
        .visitor-chart {
            height: 200px;
            display: flex;
            align-items: flex-end;
            gap: 10px;
            padding: 20px 0;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        
        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, #2a9d8f, #21867a);
            border-radius: 4px 4px 0 0;
            position: relative;
            min-height: 5px;
        }
        
        .chart-bar-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 12px;
            color: #666;
        }
        
        .chart-bar-value {
            position: absolute;
            top: -25px;
            left: 0;
            width: 100%;
            text-align: center;
            font-weight: 600;
            color: #0056b3;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .admin-sidebar {
                width: 200px;
            }
            
            .admin-main {
                margin-left: 200px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
        
        @media (max-width: 768px) {
            .admin-container {
                flex-direction: column;
            }
            
            .admin-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 15px 0;
            }
            
            .admin-main {
                margin-left: 0;
            }
            
            .admin-nav ul {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .admin-nav li {
                margin-bottom: 0;
            }
            
            .admin-nav a {
                padding: 8px 12px;
                font-size: 14px;
            }
            
            .product-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .product-actions {
                width: 100%;
                justify-content: flex-end;
            }
        }
        
        @media (max-width: 480px) {
            .admin-header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .header-actions {
                justify-content: space-between;
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Container -->
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <h2><i class="fas fa-cogs"></i> IGUMICH Admin</h2>
                <span>Industrial Equipment Management</span>
            </div>
            
            <nav class="admin-nav">
                <ul>
                    <li><a href="#" class="active" data-tab="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#" data-tab="company"><i class="fas fa-building"></i> Company Info</a></li>
                    <li><a href="#" data-tab="products"><i class="fas fa-boxes"></i> Equipment</a></li>
                    <li><a href="#" data-tab="categories"><i class="fas fa-tags"></i> Categories</a></li>
                    <li><a href="#" data-tab="whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>
                    <li><a href="#" data-tab="about"><i class="fas fa-info-circle"></i> About Page</a></li>
                    <li><a href="#" data-tab="contact"><i class="fas fa-address-book"></i> Contact Page</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Header -->
            <header class="admin-header">
                <h1 id="pageTitle">Admin Dashboard</h1>
                <div class="header-actions">
                    <div class="user-info">
                        <div class="user-avatar">A</div>
                        <div>
                            <div style="font-weight: 600;">Admin</div>
                            <div style="font-size: 12px; opacity: 0.8;">IGUMICH INT'L</div>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="saveAllBtn">
                        <i class="fas fa-save"></i> Save All
                    </button>
                    <button class="btn btn-logout" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <div class="admin-content">
                <!-- Alerts -->
                <div class="alert alert-success" id="successAlert">
                    <i class="fas fa-check-circle"></i> Changes saved successfully!
                </div>
                
                <div class="alert alert-error" id="errorAlert">
                    <i class="fas fa-exclamation-circle"></i> Error saving changes.
                </div>

                <!-- Dashboard Tab -->
                <div id="dashboardTab" class="tab-content active">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon visitors">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalVisitors">0</h3>
                                <p>Total Visitors</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon products">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="productsCount">0</h3>
                                <p>Total Equipment</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon whatsapp">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="stat-info">
                                <h3>+234 803 342 1063</h3>
                                <p>WhatsApp Inquiries</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon orders">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="todayVisitors">0</h3>
                                <p>Today's Visitors</p>
                            </div>
                        </div>
                    </div>

                    <div class="visitor-chart-container">
                        <h3 style="color: #0056b3; margin-bottom: 20px;">Visitor Analytics (Last 7 Days)</h3>
                        <div class="visitor-chart" id="visitorChart">
                            <!-- Chart will be generated here -->
                        </div>
                        <div style="text-align: center; color: #666; font-size: 14px;">
                            <i class="fas fa-info-circle"></i> Visitor tracking updates in real-time
                        </div>
                    </div>

                    <div class="admin-section">
                        <h2><i class="fas fa-info-circle"></i> Quick Actions</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                            <button class="btn btn-primary" data-tab="products">
                                <i class="fas fa-plus"></i> Add New Equipment
                            </button>
                            <button class="btn btn-primary" data-tab="categories">
                                <i class="fas fa-plus"></i> Add Category
                            </button>
                            <button class="btn btn-primary" data-tab="company">
                                <i class="fas fa-edit"></i> Edit Company Info
                            </button>
                            <a href="index.html" target="_blank" class="btn btn-secondary">
                                <i class="fas fa-eye"></i> View Website
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Company Info Tab -->
                <div id="companyTab" class="tab-content">
                    <div class="admin-section">
                        <h2><i class="fas fa-building"></i> Company Information</h2>
                        
                        <div class="form-group">
                            <label for="adminCompanyName">Company Name</label>
                            <input type="text" id="adminCompanyName" class="form-control" placeholder="Enter company name">
                        </div>
                        
                        <div class="form-group">
                            <label for="adminCompanyTagline">Company Tagline</label>
                            <input type="text" id="adminCompanyTagline" class="form-control" placeholder="Enter company tagline">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adminCompanyPhone">Phone Number</label>
                                <input type="text" id="adminCompanyPhone" class="form-control" placeholder="Enter phone number">
                            </div>
                            <div class="form-group">
                                <label for="adminCompanyEmail">Email Address</label>
                                <input type="email" id="adminCompanyEmail" class="form-control" placeholder="Enter email address">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminCompanyAddress">Business Address</label>
                            <textarea id="adminCompanyAddress" class="form-control" placeholder="Enter full business address" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminHeroTitle">Homepage Hero Title</label>
                            <input type="text" id="adminHeroTitle" class="form-control" placeholder="Enter homepage title">
                        </div>
                        
                        <div class="form-group">
                            <label for="adminHeroDescription">Homepage Hero Description</label>
                            <textarea id="adminHeroDescription" class="form-control" placeholder="Enter homepage description"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Products Tab -->
                <div id="productsTab" class="tab-content">
                    <div class="admin-section">
                        <div class="section-header">
                            <h2><i class="fas fa-boxes"></i> Equipment Management</h2>
                            <button class="btn btn-primary" id="addProductBtn">
                                <i class="fas fa-plus"></i> Add New Equipment
                            </button>
                        </div>
                        
                        <div class="products-list" id="productsList">
                            <!-- Products loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Categories Tab -->
                <div id="categoriesTab" class="tab-content">
                    <div class="admin-section">
                        <div class="section-header">
                            <h2><i class="fas fa-tags"></i> Categories Management</h2>
                            <button class="btn btn-primary" id="addCategoryBtn">
                                <i class="fas fa-plus"></i> Add New Category
                            </button>
                        </div>
                        
                        <div class="products-list" id="categoriesList">
                            <!-- Categories loaded here -->
                        </div>
                    </div>
                </div>

                <!-- WhatsApp Tab -->
                <div id="whatsappTab" class="tab-content">
                    <div class="admin-section">
                        <h2><i class="fab fa-whatsapp"></i> WhatsApp Settings</h2>
                        
                        <div class="form-group">
                            <label for="adminWhatsAppNumber">WhatsApp Business Number</label>
                            <input type="text" id="adminWhatsAppNumber" class="form-control" value="2348033421063">
                            <small style="color: #666;">Enter number without + sign</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminWhatsAppMessage">Default Inquiry Message</label>
                            <textarea id="adminWhatsAppMessage" class="form-control" rows="4">Hello IGUMICH! I'm interested in your equipment: [PRODUCT_NAME] ([PRODUCT_PRICE]). Please provide technical specifications and availability.</textarea>
                        </div>
                    </div>
                </div>

                <!-- About Page Tab -->
                <div id="aboutTab" class="tab-content">
                    <div class="admin-section">
                        <h2><i class="fas fa-info-circle"></i> About Page Content</h2>
                        
                        <div class="form-group">
                            <label for="adminAboutHeroTitle">About Page Hero Title</label>
                            <input type="text" id="adminAboutHeroTitle" class="form-control" placeholder="Enter about page title">
                        </div>
                        
                        <div class="form-group">
                            <label for="adminAboutHeroDescription">About Page Hero Description</label>
                            <textarea id="adminAboutHeroDescription" class="form-control" placeholder="Enter about page description"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminStoryTitle">Our Story Title</label>
                            <input type="text" id="adminStoryTitle" class="form-control" placeholder="Enter story title">
                        </div>
                        
                        <div class="form-group">
                            <label for="adminStoryText1">Story Text 1</label>
                            <textarea id="adminStoryText1" class="form-control" placeholder="Enter first paragraph of story" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminStoryText2">Story Text 2</label>
                            <textarea id="adminStoryText2" class="form-control" placeholder="Enter second paragraph of story" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminStoryText3">Story Text 3</label>
                            <textarea id="adminStoryText3" class="form-control" placeholder="Enter third paragraph of story" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminMissionTitle">Mission Title</label>
                            <input type="text" id="adminMissionTitle" class="form-control" placeholder="Enter mission title">
                        </div>
                        
                        <div class="form-group">
                            <label for="adminMissionText">Mission Text</label>
                            <textarea id="adminMissionText" class="form-control" placeholder="Enter mission text" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminVisionTitle">Vision Title</label>
                            <input type="text" id="adminVisionTitle" class="form-control" placeholder="Enter vision title">
                        </div>
                        
                        <div class="form-group">
                            <label for="adminVisionText">Vision Text</label>
                            <textarea id="adminVisionText" class="form-control" placeholder="Enter vision text" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Contact Page Tab -->
                <div id="contactTab" class="tab-content">
                    <div class="admin-section">
                        <h2><i class="fas fa-address-book"></i> Contact Page Content</h2>
                        
                        <div class="form-group">
                            <label for="adminContactHeroTitle">Contact Page Hero Title</label>
                            <input type="text" id="adminContactHeroTitle" class="form-control" placeholder="Enter contact page title">
                        </div>
                        
                        <div class="form-group">
                            <label for="adminContactHeroDescription">Contact Page Hero Description</label>
                            <textarea id="adminContactHeroDescription" class="form-control" placeholder="Enter contact page description"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminContactAddress">Contact Address</label>
                            <textarea id="adminContactAddress" class="form-control" placeholder="Enter business address" rows="3"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Product Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalProductTitle">Add New Equipment</h3>
                <button class="close-modal" id="closeProductModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="modalProductName">Equipment Name *</label>
                    <input type="text" id="modalProductName" class="form-control" placeholder="Enter equipment name" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="modalProductPrice">Price *</label>
                        <input type="text" id="modalProductPrice" class="form-control" placeholder="e.g., $1,299.99" required>
                    </div>
                    <div class="form-group">
                        <label for="modalProductCategory">Category *</label>
                        <select id="modalProductCategory" class="form-control" required>
                            <!-- Categories will be loaded here -->
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="modalProductDescription">Description *</label>
                    <textarea id="modalProductDescription" class="form-control" placeholder="Enter equipment description" rows="3" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="modalProductImage">Equipment Image URL</label>
                    <input type="text" id="modalProductImage" class="form-control" placeholder="Enter image URL (e.g., https://images.unsplash.com/photo-...)">
                </div>
                
                <div class="form-group">
                    <label for="modalProductSpecs">Specifications (comma separated)</label>
                    <input type="text" id="modalProductSpecs" class="form-control" placeholder="e.g., 300A Output, MIG/TIG/ARC, Digital Display">
                </div>
                
                <div class="form-group">
                    <label for="modalProductBadge">Badge Label</label>
                    <select id="modalProductBadge" class="form-control">
                        <option value="">No Badge</option>
                        <option value="Best Seller">Best Seller</option>
                        <option value="In Stock">In Stock</option>
                        <option value="Popular">Popular</option>
                        <option value="New">New</option>
                        <option value="Hot Item">Hot Item</option>
                        <option value="Essential">Essential</option>
                        <option value="Professional">Professional</option>
                        <option value="Heavy Duty">Heavy Duty</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" id="saveProductBtn">
                        <i class="fas fa-save"></i> Save Equipment
                    </button>
                    <button class="btn btn-secondary" id="cancelProductBtn">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalCategoryTitle">Add New Category</h3>
                <button class="close-modal" id="closeCategoryModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="modalCategoryName">Category Name *</label>
                    <input type="text" id="modalCategoryName" class="form-control" placeholder="Enter category name" required>
                </div>
                
                <div class="form-group">
                    <label for="modalCategoryDescription">Description *</label>
                    <textarea id="modalCategoryDescription" class="form-control" placeholder="Enter category description" rows="3" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="modalCategoryImage">Category Image URL</label>
                    <input type="text" id="modalCategoryImage" class="form-control" placeholder="Enter image URL">
                </div>
                
                <div class="form-group">
                    <label for="modalCategoryIcon">Icon Class (FontAwesome)</label>
                    <input type="text" id="modalCategoryIcon" class="form-control" placeholder="e.g., fas fa-hard-hat" value="fas fa-box">
                </div>
                
                <div class="form-group">
                    <label for="modalCategoryCount">Item Count</label>
                    <input type="number" id="modalCategoryCount" class="form-control" placeholder="e.g., 12" value="12">
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" id="saveCategoryBtn">
                        <i class="fas fa-save"></i> Save Category
                    </button>
                    <button class="btn btn-secondary" id="cancelCategoryBtn">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize visitor tracking
        function initVisitorTracking() {
            let visitors = localStorage.getItem('igumichVisitors');
            if (!visitors) {
                visitors = {
                    total: 0,
                    today: 0,
                    todayDate: new Date().toDateString(),
                    dailyStats: {},
                    last7Days: []
                };
                localStorage.setItem('igumichVisitors', JSON.stringify(visitors));
            } else {
                visitors = JSON.parse(visitors);
                
                // Reset today's count if it's a new day
                if (visitors.todayDate !== new Date().toDateString()) {
                    visitors.today = 0;
                    visitors.todayDate = new Date().toDateString();
                }
            }
            return visitors;
        }

        // Update visitor display
        function updateVisitorDisplay() {
            const visitors = JSON.parse(localStorage.getItem('igumichVisitors') || '{"total":0,"today":0}');
            
            // Update counters
            document.getElementById('totalVisitors').textContent = visitors.total || 0;
            document.getElementById('todayVisitors').textContent = visitors.today || 0;
            document.getElementById('productsCount').textContent = (JSON.parse(localStorage.getItem('igumichContent') || '{"products":[]}').products || []).length;
            
            // Generate chart
            generateVisitorChart();
        }

        // Generate visitor chart
        function generateVisitorChart() {
            const chart = document.getElementById('visitorChart');
            chart.innerHTML = '';
            
            const visitors = JSON.parse(localStorage.getItem('igumichVisitors') || '{"dailyStats":{}}');
            const dailyStats = visitors.dailyStats || {};
            
            // Get last 7 days
            const days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateStr = date.toISOString().split('T')[0];
                const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                days.push({
                    date: dateStr,
                    label: dayName,
                    count: dailyStats[dateStr] || 0
                });
            }
            
            // Find max for scaling
            const maxCount = Math.max(...days.map(d => d.count), 1);
            
            // Create bars
            days.forEach(day => {
                const height = (day.count / maxCount) * 100;
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${height}%`;
                bar.innerHTML = `
                    <div class="chart-bar-value">${day.count}</div>
                    <div class="chart-bar-label">${day.label}</div>
                `;
                chart.appendChild(bar);
            });
        }

        // Track a new visitor (call this from your public pages)
        function trackVisitor() {
            let visitors = JSON.parse(localStorage.getItem('igumichVisitors') || '{"total":0,"today":0,"todayDate":"","dailyStats":{}}');
            
            // Initialize if empty
            if (!visitors.total) visitors.total = 0;
            if (!visitors.today) visitors.today = 0;
            if (!visitors.dailyStats) visitors.dailyStats = {};
            
            const today = new Date().toISOString().split('T')[0];
            
            // Update counts
            visitors.total++;
            visitors.today++;
            
            // Update daily stats
            if (!visitors.dailyStats[today]) {
                visitors.dailyStats[today] = 0;
            }
            visitors.dailyStats[today]++;
            
            // Save
            localStorage.setItem('igumichVisitors', JSON.stringify(visitors));
            
            // Update display if on admin page
            if (document.getElementById('totalVisitors')) {
                updateVisitorDisplay();
            }
        }

        // Default data
        const defaultData = {
            companyName: "IGUMICH INT'L LIMITED",
            companyTagline: "Safety, Marine & Industrial Solutions",
            companyPhone: "+234 803 342 1063",
            companyEmail: "info@igumich.com",
            companyAddress: "Industrial Equipment Plaza, 123 Business District, Ikeja, Lagos, Nigeria",
            heroTitle: "Premium Equipment for Industry & Safety",
            heroDescription: "IGUMICH INT'L LIMITED provides certified safety equipment, marine supplies, construction tools, and industrial machinery that meet the highest international standards for diverse industries.",
            whatsappNumber: "2348033421063",
            whatsappMessage: "Hello IGUMICH! I'm interested in your equipment: [PRODUCT_NAME] ([PRODUCT_PRICE]). Please provide technical specifications and availability.",
            products: [
                {
                    id: 1,
                    name: "Industrial Safety Helmet",
                    category: "Safety Equipment",
                    price: "$34.99",
                    description: "High-density polyethylene shell with suspension system. ANSI/ISEA Z89.1 certified.",
                    image: "https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    specs: ["ANSI Z89.1", "HDPE Shell", "Adjustable"],
                    badge: "Best Seller"
                },
                {
                    id: 2,
                    name: "Marine Navigation GPS",
                    category: "Marine Equipment",
                    price: "$899.99",
                    description: "Professional marine GPS with chartplotter and fishfinder capabilities.",
                    image: "https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    specs: ["GPS/GLONASS", "Chartplotter", "Waterproof"],
                    badge: "In Stock"
                }
            ],
            categories: [
                {
                    name: "Safety Equipment",
                    description: "PPE, fire safety, fall protection, and industrial safety gear meeting international standards.",
                    image: "https://images.unsplash.com/photo-1581579431537-3415688e49e6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    icon: "fas fa-hard-hat",
                    count: 12
                },
                {
                    name: "Marine Equipment",
                    description: "Navigation systems, marine safety, fishing gear, and offshore supplies.",
                    image: "https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                    icon: "fas fa-ship",
                    count: 8
                }
            ],
            aboutContent: {
                heroTitle: "Your Trusted Partner in Industrial Solutions",
                heroDescription: "For over a decade, IGUMICH INT'L LIMITED has been providing comprehensive equipment solutions for safety, marine, construction, and industrial sectors across West Africa.",
                storyTitle: "Our Industrial Journey",
                storyText1: "Founded in 2012, IGUMICH INT'L LIMITED began with a vision to provide comprehensive equipment solutions across multiple industries in West Africa. What started as a specialized safety equipment supplier has grown into a multi-sector industrial solutions provider.",
                storyText2: "We've expanded our expertise to include marine equipment, construction tools, and industrial machinery, becoming a one-stop solution for businesses across diverse sectors. From construction sites to offshore platforms, manufacturing plants to industrial facilities, we provide the equipment that powers industries.",
                storyText3: "Our growth is driven by our commitment to quality, reliability, and customer-focused solutions. We don't just supply equipment; we provide complete industrial solutions tailored to each client's specific operational needs and challenges.",
                missionTitle: "Our Mission",
                missionText: "To provide certified, high-quality industrial equipment and expert solutions that enhance operational efficiency, ensure safety, and drive growth across construction, marine, manufacturing, and safety sectors in West Africa.",
                visionTitle: "Our Vision",
                visionText: "To be West Africa's most trusted multi-sector industrial solutions partner, recognized for innovation, reliability, and comprehensive support across all industries we serve."
            },
            contactContent: {
                heroTitle: "Contact Our Industry Specialists",
                heroDescription: "Have questions about our equipment? Need technical consultation for your project? Our industry specialists are ready to assist you with comprehensive solutions.",
                companyAddress: "Industrial Equipment Plaza, 123 Business District, Ikeja, Lagos, Nigeria"
            }
        };

        // Check admin login
        document.addEventListener('DOMContentLoaded', function() {
            const loginTime = localStorage.getItem('adminLoginTime');
            const currentTime = new Date().getTime();
            const eightHours = 8 * 60 * 60 * 1000;
            
            if (localStorage.getItem('adminLoggedIn') !== 'true' || 
                !loginTime || 
                (currentTime - parseInt(loginTime)) > eightHours) {
                
                window.location.href = 'admin-login.html';
                return;
            }
            
            // Initialize visitor tracking
            initVisitorTracking();
            
            // Load data
            loadAdminData();
            
            // Setup event listeners
            setupEventListeners();
            
            // Update visitor display
            updateVisitorDisplay();
            
            // Simulate some visitors for demo
            simulateVisitors();
        });

        // Load admin data
        function loadAdminData() {
            const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
            
            // Populate company info
            document.getElementById('adminCompanyName').value = data.companyName;
            document.getElementById('adminCompanyTagline').value = data.companyTagline;
            document.getElementById('adminCompanyPhone').value = data.companyPhone;
            document.getElementById('adminCompanyEmail').value = data.companyEmail;
            document.getElementById('adminCompanyAddress').value = data.companyAddress;
            document.getElementById('adminHeroTitle').value = data.heroTitle;
            document.getElementById('adminHeroDescription').value = data.heroDescription;
            document.getElementById('adminWhatsAppNumber').value = data.whatsappNumber;
            document.getElementById('adminWhatsAppMessage').value = data.whatsappMessage;
            
            // Populate about page content
            if (data.aboutContent) {
                document.getElementById('adminAboutHeroTitle').value = data.aboutContent.heroTitle || '';
                document.getElementById('adminAboutHeroDescription').value = data.aboutContent.heroDescription || '';
                document.getElementById('adminStoryTitle').value = data.aboutContent.storyTitle || '';
                document.getElementById('adminStoryText1').value = data.aboutContent.storyText1 || '';
                document.getElementById('adminStoryText2').value = data.aboutContent.storyText2 || '';
                document.getElementById('adminStoryText3').value = data.aboutContent.storyText3 || '';
                document.getElementById('adminMissionTitle').value = data.aboutContent.missionTitle || '';
                document.getElementById('adminMissionText').value = data.aboutContent.missionText || '';
                document.getElementById('adminVisionTitle').value = data.aboutContent.visionTitle || '';
                document.getElementById('adminVisionText').value = data.aboutContent.visionText || '';
            }
            
            // Populate contact page content
            if (data.contactContent) {
                document.getElementById('adminContactHeroTitle').value = data.contactContent.heroTitle || '';
                document.getElementById('adminContactHeroDescription').value = data.contactContent.heroDescription || '';
                document.getElementById('adminContactAddress').value = data.contactContent.companyAddress || '';
            }
            
            // Load products
            loadProductsList(data.products || []);
            
            // Load categories
            loadCategoriesList(data.categories || []);
            
            // Load categories for product dropdown
            loadCategoryDropdown(data.categories || []);
        }

        // Load products list
        function loadProductsList(products) {
            const container = document.getElementById('productsList');
            container.innerHTML = '';
            
            if (!products || products.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 30px;">No equipment added yet.</p>';
                return;
            }
            
            products.forEach((product, index) => {
                const item = document.createElement('div');
                item.className = 'product-item';
                item.innerHTML = `
                    <div class="product-info">
                        <img src="${product.image || 'https://via.placeholder.com/60'}" 
                             class="product-img-small" 
                             alt="${product.name}">
                        <div class="product-details">
                            <h4>${product.name}</h4>
                            <p>${product.price}  ${product.category} ${product.badge ? `<span style="background:#e63946;color:white;padding:2px 8px;border-radius:3px;font-size:12px;">${product.badge}</span>` : ''}</p>
                        </div>
                    </div>
                    <div class="product-actions">
                        <button class="btn btn-sm btn-edit" onclick="editProduct(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-sm btn-delete" onclick="deleteProduct(${index})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Load categories list
        function loadCategoriesList(categories) {
            const container = document.getElementById('categoriesList');
            container.innerHTML = '';
            
            if (!categories || categories.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 30px;">No categories added yet.</p>';
                return;
            }
            
            categories.forEach((category, index) => {
                const item = document.createElement('div');
                item.className = 'product-item';
                item.innerHTML = `
                    <div class="product-info">
                        <div style="width: 60px; height: 60px; background: #f0f7ff; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                            <i class="${category.icon || 'fas fa-tag'}" style="font-size: 24px; color: #0056b3;"></i>
                        </div>
                        <div class="product-details">
                            <h4>${category.name}</h4>
                            <p>${category.description}</p>
                            <p style="color: #666; font-size: 12px; margin-top: 5px;">${category.count || 0} items</p>
                        </div>
                    </div>
                    <div class="product-actions">
                        <button class="btn btn-sm btn-edit" onclick="editCategory(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-sm btn-delete" onclick="deleteCategory(${index})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Load categories for product dropdown
        function loadCategoryDropdown(categories) {
            const dropdown = document.getElementById('modalProductCategory');
            dropdown.innerHTML = '';
            
            if (!categories || categories.length === 0) {
                dropdown.innerHTML = '<option value="">No categories available</option>';
                return;
            }
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.name;
                option.textContent = category.name;
                dropdown.appendChild(option);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Tab navigation
            document.querySelectorAll('.admin-nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tab = this.getAttribute('data-tab');
                    switchTab(tab);
                });
            });
            
            // Quick action buttons
            document.querySelectorAll('[data-tab]').forEach(btn => {
                if (btn.tagName === 'BUTTON') {
                    btn.addEventListener('click', function() {
                        const tab = this.getAttribute('data-tab');
                        switchTab(tab);
                    });
                }
            });
            
            // Save all button
            document.getElementById('saveAllBtn').addEventListener('click', saveAllData);
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', logout);
            
            // Product modal
            document.getElementById('addProductBtn').addEventListener('click', () => openProductModal());
            document.getElementById('closeProductModal').addEventListener('click', closeProductModal);
            document.getElementById('cancelProductBtn').addEventListener('click', closeProductModal);
            document.getElementById('saveProductBtn').addEventListener('click', saveProduct);
            
            // Category modal
            document.getElementById('addCategoryBtn').addEventListener('click', () => openCategoryModal());
            document.getElementById('closeCategoryModal').addEventListener('click', closeCategoryModal);
            document.getElementById('cancelCategoryBtn').addEventListener('click', closeCategoryModal);
            document.getElementById('saveCategoryBtn').addEventListener('click', saveCategory);
        }

        // Switch tabs
        function switchTab(tabName) {
            document.querySelectorAll('.admin-nav a').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-tab') === tabName) {
                    link.classList.add('active');
                }
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Update page title
            let pageTitle = tabName.charAt(0).toUpperCase() + tabName.slice(1);
            if (tabName === 'products') pageTitle = 'Equipment Management';
            if (tabName === 'categories') pageTitle = 'Categories Management';
            document.getElementById('pageTitle').textContent = pageTitle;
        }

        // Product modal functions
        let editingProductIndex = -1;
        
        function openProductModal(product = null) {
            const modal = document.getElementById('productModal');
            const title = document.getElementById('modalProductTitle');
            
            // Load categories for dropdown
            const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
            loadCategoryDropdown(data.categories || []);
            
            if (product) {
                title.textContent = 'Edit Equipment';
                editingProductIndex = product.index;
                document.getElementById('modalProductName').value = product.name || '';
                document.getElementById('modalProductPrice').value = product.price || '';
                document.getElementById('modalProductDescription').value = product.description || '';
                document.getElementById('modalProductImage').value = product.image || '';
                document.getElementById('modalProductCategory').value = product.category || '';
                document.getElementById('modalProductSpecs').value = product.specs ? product.specs.join(', ') : '';
                document.getElementById('modalProductBadge').value = product.badge || '';
            } else {
                title.textContent = 'Add New Equipment';
                editingProductIndex = -1;
                document.getElementById('modalProductName').value = '';
                document.getElementById('modalProductPrice').value = '';
                document.getElementById('modalProductDescription').value = '';
                document.getElementById('modalProductImage').value = '';
                document.getElementById('modalProductCategory').value = data.categories && data.categories.length > 0 ? data.categories[0].name : '';
                document.getElementById('modalProductSpecs').value = '';
                document.getElementById('modalProductBadge').value = '';
            }
            
            modal.style.display = 'flex';
        }
        
        function closeProductModal() {
            document.getElementById('productModal').style.display = 'none';
        }

        // Category modal functions
        let editingCategoryIndex = -1;
        
        function openCategoryModal(category = null) {
            const modal = document.getElementById('categoryModal');
            const title = document.getElementById('modalCategoryTitle');
            
            if (category) {
                title.textContent = 'Edit Category';
                editingCategoryIndex = category.index;
                document.getElementById('modalCategoryName').value = category.name || '';
                document.getElementById('modalCategoryDescription').value = category.description || '';
                document.getElementById('modalCategoryImage').value = category.image || '';
                document.getElementById('modalCategoryIcon').value = category.icon || 'fas fa-box';
                document.getElementById('modalCategoryCount').value = category.count || 12;
            } else {
                title.textContent = 'Add New Category';
                editingCategoryIndex = -1;
                document.getElementById('modalCategoryName').value = '';
                document.getElementById('modalCategoryDescription').value = '';
                document.getElementById('modalCategoryImage').value = '';
                document.getElementById('modalCategoryIcon').value = 'fas fa-box';
                document.getElementById('modalCategoryCount').value = 12;
            }
            
            modal.style.display = 'flex';
        }
        
        function closeCategoryModal() {
            document.getElementById('categoryModal').style.display = 'none';
        }

        // Edit product
        window.editProduct = function(index) {
            const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
            const product = data.products[index];
            if (product) {
                product.index = index;
                openProductModal(product);
            }
        };

        // Edit category
        window.editCategory = function(index) {
            const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
            const category = data.categories[index];
            if (category) {
                category.index = index;
                openCategoryModal(category);
            }
        };

        // Save product
        function saveProduct() {
            const name = document.getElementById('modalProductName').value;
            const price = document.getElementById('modalProductPrice').value;
            const description = document.getElementById('modalProductDescription').value;
            const image = document.getElementById('modalProductImage').value;
            const category = document.getElementById('modalProductCategory').value;
            const specs = document.getElementById('modalProductSpecs').value.split(',').map(s => s.trim()).filter(s => s);
            const badge = document.getElementById('modalProductBadge').value;
            
            if (!name || !price || !description || !category) {
                showAlert('error', 'Please fill in all required fields');
                return;
            }
            
            const product = {
                id: Date.now(),
                name,
                price,
                description,
                image: image || 'https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                category,
                specs: specs.length > 0 ? specs : undefined,
                badge: badge || undefined
            };
            
            const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
            
            if (!data.products) {
                data.products = [];
            }
            
            if (editingProductIndex >= 0) {
                product.id = data.products[editingProductIndex].id;
                data.products[editingProductIndex] = product;
            } else {
                data.products.push(product);
            }
            
            localStorage.setItem('igumichContent', JSON.stringify(data));
            loadProductsList(data.products);
            document.getElementById('productsCount').textContent = data.products.length;
            
            closeProductModal();
            showAlert('success', 'Equipment saved successfully!');
        }

        // Save category
        function saveCategory() {
            const name = document.getElementById('modalCategoryName').value;
            const description = document.getElementById('modalCategoryDescription').value;
            const image = document.getElementById('modalCategoryImage').value;
            const icon = document.getElementById('modalCategoryIcon').value;
            const count = parseInt(document.getElementById('modalCategoryCount').value) || 12;
            
            if (!name || !description) {
                showAlert('error', 'Please fill in all required fields');
                return;
            }
            
            const category = {
                name,
                description,
                image: image || '',
                icon: icon || 'fas fa-box',
                count: count
            };
            
            const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
            
            if (!data.categories) {
                data.categories = [];
            }
            
            if (editingCategoryIndex >= 0) {
                data.categories[editingCategoryIndex] = category;
            } else {
                data.categories.push(category);
            }
            
            localStorage.setItem('igumichContent', JSON.stringify(data));
            loadCategoriesList(data.categories);
            loadCategoryDropdown(data.categories);
            
            closeCategoryModal();
            showAlert('success', 'Category saved successfully!');
        }

        // Delete product
        window.deleteProduct = function(index) {
            if (confirm('Are you sure you want to delete this equipment?')) {
                const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
                
                if (data.products && data.products[index]) {
                    data.products.splice(index, 1);
                    localStorage.setItem('igumichContent', JSON.stringify(data));
                    loadProductsList(data.products);
                    document.getElementById('productsCount').textContent = data.products.length;
                    showAlert('success', 'Equipment deleted successfully!');
                }
            }
        };

        // Delete category
        window.deleteCategory = function(index) {
            if (confirm('Are you sure you want to delete this category?')) {
                const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
                
                if (data.categories && data.categories[index]) {
                    // Check if any products use this category
                    const categoryName = data.categories[index].name;
                    const productsUsingCategory = data.products ? data.products.filter(p => p.category === categoryName) : [];
                    
                    if (productsUsingCategory.length > 0) {
                        showAlert('error', `Cannot delete category. ${productsUsingCategory.length} equipment item(s) use this category. Please reassign them first.`);
                        return;
                    }
                    
                    data.categories.splice(index, 1);
                    localStorage.setItem('igumichContent', JSON.stringify(data));
                    loadCategoriesList(data.categories);
                    loadCategoryDropdown(data.categories);
                    showAlert('success', 'Category deleted successfully!');
                }
            }
        };

        // Save all data
        function saveAllData() {
            const data = JSON.parse(localStorage.getItem('igumichContent')) || defaultData;
            
            // Save company info
            data.companyName = document.getElementById('adminCompanyName').value;
            data.companyTagline = document.getElementById('adminCompanyTagline').value;
            data.companyPhone = document.getElementById('adminCompanyPhone').value;
            data.companyEmail = document.getElementById('adminCompanyEmail').value;
            data.companyAddress = document.getElementById('adminCompanyAddress').value;
            data.heroTitle = document.getElementById('adminHeroTitle').value;
            data.heroDescription = document.getElementById('adminHeroDescription').value;
            data.whatsappNumber = document.getElementById('adminWhatsAppNumber').value;
            data.whatsappMessage = document.getElementById('adminWhatsAppMessage').value;
            
            // Save about page content
            data.aboutContent = data.aboutContent || {};
            data.aboutContent.heroTitle = document.getElementById('adminAboutHeroTitle').value;
            data.aboutContent.heroDescription = document.getElementById('adminAboutHeroDescription').value;
            data.aboutContent.storyTitle = document.getElementById('adminStoryTitle').value;
            data.aboutContent.storyText1 = document.getElementById('adminStoryText1').value;
            data.aboutContent.storyText2 = document.getElementById('adminStoryText2').value;
            data.aboutContent.storyText3 = document.getElementById('adminStoryText3').value;
            data.aboutContent.missionTitle = document.getElementById('adminMissionTitle').value;
            data.aboutContent.missionText = document.getElementById('adminMissionText').value;
            data.aboutContent.visionTitle = document.getElementById('adminVisionTitle').value;
            data.aboutContent.visionText = document.getElementById('adminVisionText').value;
            
            // Save contact page content
            data.contactContent = data.contactContent || {};
            data.contactContent.heroTitle = document.getElementById('adminContactHeroTitle').value;
            data.contactContent.heroDescription = document.getElementById('adminContactHeroDescription').value;
            data.contactContent.companyAddress = document.getElementById('adminContactAddress').value;
            
            localStorage.setItem('igumichContent', JSON.stringify(data));
            showAlert('success', 'All changes saved successfully!');
        }

        // Show alert
        function showAlert(type, message) {
            const alert = document.getElementById(type === 'success' ? 'successAlert' : 'errorAlert');
            alert.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : 'exclamation'}-circle"></i> ${message}`;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }

        // Logout
        function logout() {
            localStorage.removeItem('adminLoggedIn');
            localStorage.removeItem('adminLoginTime');
            window.location.href = 'admin-login.html';
        }

        // Simulate visitors for demo
        function simulateVisitors() {
            // Add some initial visitor data for demo
            let visitors = JSON.parse(localStorage.getItem('igumichVisitors') || '{"total":0,"today":0,"dailyStats":{}}');
            
            if (visitors.total === 0) {
                // Add demo data
                visitors.total = 152;
                visitors.today = 8;
                visitors.dailyStats = {};
                
                // Add last 7 days of data
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    visitors.dailyStats[dateStr] = Math.floor(Math.random() * 30) + 10;
                }
                
                localStorage.setItem('igumichVisitors', JSON.stringify(visitors));
                updateVisitorDisplay();
            }
        }

        // Simulate new visitors every 10 seconds for demo
        setInterval(() => {
            if (Math.random() > 0.7) { // 30% chance
                trackVisitor();
            }
        }, 10000);
    </script>
</body>
</html>